<html id="id-html" lang="{{ language_code }}">
  <head>
    <title>Dashboard</title>
    <meta charset="UTF-8" />
    <meta name="msapplication-TileColor" content="#da532c" />
    <meta name="theme-color" content="#ffffff" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />

    <script src="https://cdn.tailwindcss.com"></script>
  </head>

  <body class="bg-slate-100">
    <div class="w-full max-w-5xl mx-auto flex flex-col space-y-5 p-4">
      <div class="flex px-4 py-2 justify-between mt-10">
        <span class="text-gray-600 font-semibold"> </span>
        <div
          class="bg-white rounded shadow p-2 text-sm text-gray-600 flex items-center font-semibold mr-2 cursor-pointer"
        >
          Last Week
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="h-4 w-4"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              d="M19 9l-7 7-7-7"
            />
          </svg>
        </div>
      </div>
      <div class="w-full grid grid-cols-2 gap-6">
        {# loop through the list of charts and add placeholder divs to grid #}
        {% for c in charts %}
        <div
          class="bg-white shadow rounded-lg p-4 {% if forloop.counter0 == 0 %}col-span-2 {% endif %}"
        >
          <div
            id="{{ c.chart_id }}"
            class="chart-container"
            style="width:{{ c.width }}; height:{{ c.height }};"
          ></div>
        </div>
        {% endfor %}
      </div>
    </div>
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/echarts/5.3.3/echarts.min.js"
      integrity="sha512-2L0h0GhoIHQEjti/1KwfjcbyaTHy+hPPhE1o5wTCmviYcPO/TD9oZvUxFQtWvBkCSTIpt+fjsx1CCx6ekb51gw=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    ></script>
    <script></script>
  </body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", function(){
    {% for c in charts %}

      var chart_{{ c.chart_id }} = echarts.init(
        document.getElementById('{{ c.chart_id }}'),
                                 '{{ c.theme }}',
                                  { renderer: '{{ c.renderer }}'}
                               );
      {% for js in c.js_functions.items %}
        {{ js|safe }}
      {% endfor %}

      var option_{{ c.chart_id }} = {{ c.json_contents|safe }};
      chart_{{ c.chart_id }}.setOption(option_{{ c.chart_id }});


      {% if c.width|slice:"-1:" == '%' %}
      window.addEventListener('resize', function(){chart_{{ c.chart_id }}.resize();})
      {% endif %}
      {% endfor %}
  })
</script>
